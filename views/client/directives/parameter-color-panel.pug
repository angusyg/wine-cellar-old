md-whiteframe.md-whiteframe-3dp.users-frame(flex='100' layout='row' layout-wrap='' layout-align='')
    md-list.make-scrollable(flex='40')
        md-list-item.md-2-line(ng-click='user.reset()')
            md-icon.md-avatar-icon
                i.material-icons person_add
            .md-list-item-text(layout='column')
                h3 Ajouter
        md-list-item.md-3-line(ng-repeat='u in user.list | orderBy:"login"' ng-click='user.select(u, $index)' ng-class='{"selected": $index === user.selectedIndex}')
            md-icon.md-avatar-icon(ng-class='{"admin": u.role === user.ADMIN, "normal":  u.role === user.USER}')
                i.material-icons person
            .md-list-item-text(layout='column')
                h3 {{ u.login | limitTo: 20}}
                h4 {{ u.email | limitTo: 20}}
            md-icon.md-secondary(ng-click='user.remove(u, $index)')
                i.material-icons cancel
                md-tooltip(md-direction='bottom' md-delay='1000') Supprimer
    md-content.users-content(flex='')
        form(name='userForm' ng-submit='user.saveOrUpdate(userForm)')                
            md-input-container.md-block
                label Login
                md-icon
                    i.material-icons account_circle
                input(required='', name='login', ng-model='user.selected.login')
                div(ng-messages='userForm.login.$error')
                    div(ng-message='required') Veuillez entrer un login
            md-input-container.md-block
                label Email
                md-icon
                    i.material-icons mail
                input(required='', name='email', type='email', ng-pattern = "/^.+@.+\..+$/" ng-model='user.selected.email')
                div(ng-messages='userForm.email.$error')
                    div(ng-message='required') Veuillez entrer un email
                    div(ng-message='pattern') Veuillez entrer un email valide
            md-input-container.md-block
                label Mot de passe
                md-icon
                    i.material-icons lock
                input(required='', type='password', name='password', ng-model='user.selected.password' minlength='8')
                div(ng-messages='userForm.password.$error')
                    div(ng-message='required') Veuillez entrer un mot de passe
                    div(ng-message='minlength') Veuillez entrer un mot de passe d'au moins 8 caract√®res
            md-input-container.md-block
                md-checkbox.md-primary(ng-model='user.selected.role' ng-true-value='"ADMIN"' ng-false-value='"USER"') Administrateur
            md-content(layout='row' layout-align='end')
                md-button.md-raised.md-primary(type='submit' ng-disabled='userForm.$invalid || (vm.mode === vm.EDIT && userForm.$pristine)') 
                    span(ng-if='user.mode === user.ADD') Ajouter
                    span(ng-if='user.mode === user.EDIT') Enregistrer
